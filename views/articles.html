<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../styles/style.css" rel="stylesheet">
    <link href="../styles/article_card.css" rel="stylesheet">
    <title>Articles</title>
</head>
<body class="tcentered">
    <reusable-header></reusable-header>

    <main class="fmedium">
        <div class="card-grid">
            <!-- Article cards will be inserted here -->
        </div>
    </main>

    <footer class="fsmall">
        Have fun with the background color!
        <div>
            <button id="random">Random</button>
        </div>
    </footer>

    <reusable-footer></reusable-footer>


    
</body>

<script src="../components/header.js"></script>
<script src="../components/footer.js"></script>

<!-- These have to be after the tags have been defined! -->
<script src="../scripts/random_background.js"></script>
<script src="../components/article_card.js"></script>

<script>
    async function loadArticles() {
        try {
            const response = await fetch('../data/articles.json');
            const articles = await response.json();
            
            const grid = document.querySelector(".card-grid");
            grid.innerHTML = ''; // Clear any existing content
            
            articles.forEach(article => {
                grid.innerHTML += articleCard(
                    article.image,
                    article.title,
                    article.title,
                    article.description,
                    `../articles/${article.id}.html`,
                    "Read More"
                );
            });
        } catch (error) {
            console.error('Error loading articles:', error);
            // Fallback to show an error message
            const grid = document.querySelector(".card-grid");
            grid.innerHTML = '<p>Sorry, articles could not be loaded at this time.</p>';
        }
    }
    
    // Load articles when the page loads
    window.addEventListener('load', loadArticles);
</script>

</html>